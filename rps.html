<!DOCTYPE html>
<html>
    <head>
        <script>
            /*Player selects choice using input. At current stage, input must match exaclty. If 
            it does not, the function is recursively called until it does.*/
            function playerSelection() {
                let selection = prompt("Choose 'Rock', 'Paper', or 'Scissors'");
                if (selection!="Rock" && selection!="Paper" && selection!="Scissors") {
                    console.log("You are a dumb human: Please try again");
                    playerSelection();
                } else {
                    return selection; 
                }
            }
            /*Computer uses random function to choose number between 1 & 3. Each value
            corresponds with rock, paper, or scissors*/
            function computerPlay() {
                let number = Math.floor((Math.random()*3)+1);
                if (number == 1) {
                    return "Rock";
                } else if (number == 2) {
                    return "Paper";
                } else if (number == 3) {
                    return "Scissors";
                } else {
                    return computerPlay();
                }
            }
            /*Takes values from first two functions and compares them and determines
            a winner using the game rules*/
            function playRound(player, cpu) {
                switch(player) {
                    case "Rock":
                        if (cpu == "Rock") {
                            console.log("The game ends in a draw!");
                            return "draw";
                        } else if (cpu == "Paper") {
                            console.log("You lose: Paper beats rock!");
                            return "loss";
                        } else {
                            console.log("You win: Rock beats scissors!");
                            return "win";
                        }
                        break;
                    case "Paper":
                        if (cpu == "Rock") {
                            console.log("You win: Paper beats rock!");
                            return "win";
                        } else if (cpu == "Paper") {
                            console.log("The game ends in a draw!");
                            return "draw";
                        } else {
                            console.log("You lose: Scissors beats paper");
                            return "loss";
                        }
                        break;
                    case "Scissors":
                        if (cpu == "Rock") {
                            console.log("You lose: Rock beats scissors");
                            return "loss";
                        } else if (cpu == "Paper") {
                            console.log("You win: Scissors beats paper");
                            return "win";
                        } else {
                            console.log("The game ends in a draw!");
                            return "draw";
                        }
                        break; 
                }
            }
            function game(numGames) {
                winsReq = Math.ceil(numGames/2);
                console.log("You are playing best ",winsReq," out of ",numGames,"!");
                let playerWins = 0;
                let cpuWins = 0; 
                while (playerWins<winsReq && cpuWins<winsReq) {
                    let cpu = computerPlay();
                    let player = playerSelection();
                    let result = playRound(player, cpu);
                    if (result == "win") {
                        playerWins++;
                    } else if (result == "loss") {
                        cpuWins++;
                    } else {}
                }
                if (playerWins > cpuWins) {
                    return "Congrats, you have defeated the machine. Humanity is saved!";
                }  else {
                    return "You have been bested by an inanimate object. You suck.";
                }
            }
            /*While loop allowing the player to play indefinitely*/
            
        </script>
    </head>
    <body>
       
    </body>
</html>